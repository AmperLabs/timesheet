@page "/bunkai/{kataName}"

@using Timesheet.Common
@using Timesheet.Services
@using Timesheet.Entities

@rendermode InteractiveServer
<FluentBreadcrumb>
    <FluentBreadcrumbItem Href="bunkai">
        Bunkai
    </FluentBreadcrumbItem>
    <FluentBreadcrumbItem Href="@($"bunkai/{KataName}")">
        @KataName
    </FluentBreadcrumbItem>
</FluentBreadcrumb>

<FluentLabel Typo="Typography.PageTitle">Bunkai Viewer</FluentLabel>


@if(Bunkai == null)
{
    <FluentLabel>Bunkai not found.</FluentLabel>
}
else
{
    @BunkaiMarkup
}

@code {
    [Inject]
    public BunkaiService BunkaiService { get; set; }

    [Parameter]
    public string KataName { get; set; }

    private Bunkai? Bunkai = null;

    private MarkupString BunkaiMarkup;

    protected override async Task OnParametersSetAsync()
    {
        Bunkai = await BunkaiService.GetByKataName(KataName);

        var html = Markdig.Markdown.ToHtml(Bunkai.Description ?? "");
        BunkaiMarkup = (MarkupString)html;
    }
}
